CREATE TABLE "detallepedido" (
	"id_detalle" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"cantidad" INTEGER NOT NULL,
	"id_item" INTEGER NOT NULL,
	"id_pedido" INTEGER NOT NULL,
	PRIMARY KEY("id_detalle")
);




CREATE TABLE "cliente" (
	"id_cliente" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"nombre" VARCHAR(40) NOT NULL,
	"telefono" INTEGER,
	PRIMARY KEY("id_cliente")
);




CREATE TABLE "pedido" (
	"id_pedido" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"fecha" DATE NOT NULL,
	"estado" VARCHAR(20) NOT NULL,
	"id_cliente" INTEGER NOT NULL,
	PRIMARY KEY("id_pedido")
);




CREATE TABLE "item" (
	"id_item" INTEGER NOT NULL UNIQUE GENERATED BY DEFAULT AS IDENTITY,
	"nombre" VARCHAR(50) NOT NULL,
	"descripcion" TEXT,
	"precio" DOUBLE PRECISION NOT NULL CHECK(precio >= 0),
	PRIMARY KEY("id_item")
);



ALTER TABLE "detallepedido"
ADD FOREIGN KEY("id_item") REFERENCES "item"("id_item")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "detallepedido"
ADD FOREIGN KEY("id_pedido") REFERENCES "pedido"("id_pedido")
ON UPDATE NO ACTION ON DELETE NO ACTION;
ALTER TABLE "pedido"
ADD FOREIGN KEY("id_cliente") REFERENCES "cliente"("id_cliente")
ON UPDATE NO ACTION ON DELETE NO ACTION;